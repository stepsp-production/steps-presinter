// /vendor/livekit-client.umd.min.js
(function () {
  if (window.LivekitClient || window.livekitClient || window.LiveKitClient) return;

  function load(src) {
    return new Promise((resolve, reject) => {
      const s = document.createElement('script');
      s.src = src;
      s.async = true;
      s.onload = () => resolve();
      s.onerror = () => reject(new Error('Failed to load ' + src));
      document.head.appendChild(s);
    });
  }

  const CDN = 'https://cdn.jsdelivr.net/npm/livekit-client@latest/dist/livekit-client.umd.min.js';

  load(CDN).then(() => {
    // بعض إصدارات UMD تضع LivekitClient أو livekitClient
    const lk = window.LivekitClient || window.livekitClient || window.LiveKitClient;
    if (!lk) throw new Error('LiveKit UMD not found after load');
    window.LivekitClient = lk;
    console.log('[vendor] livekit-client UMD loaded from CDN');
  }).catch(err => {
    console.error(err);
  });
})();
